<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pomodoro Timer</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ…</text></svg>">
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>
<div class="container">
  <h1>Pomodoro</h1>

  <!-- Mode tabs -->
  <div class="tabs">
    <button class="tab active-work" onclick="setMode('work')">Focus</button>
    <button class="tab" onclick="setMode('short')">Short Break</button>
    <button class="tab" onclick="setMode('long')">Long Break</button>
  </div>

  <!-- Task input -->
  <div class="task-input">
    <input type="text" id="task" placeholder="Add a task..." onkeydown="if(event.key==='Enter')addTask()" />
    <button onclick="addTask()">+</button>
  </div>

  <!-- Task list -->
  <div class="task-list" id="task-list"></div>

  <!-- Timer settings -->
  <div class="settings">
    <button class="settings-toggle" onclick="toggleSettings()">âš™ï¸ Timer Settings</button>
    <div class="settings-panel" id="settings-panel">
      <div class="setting-row"><span>Focus (min)</span><input type="number" id="set-work" value="25" min="1" max="120"></div>
      <div class="setting-row"><span>Short Break (min)</span><input type="number" id="set-short" value="5" min="1" max="60"></div>
      <div class="setting-row"><span>Long Break (min)</span><input type="number" id="set-long" value="15" min="1" max="60"></div>
      <button onclick="applySettings()">Apply</button>
    </div>
  </div>

  <!-- Circular timer -->
  <div class="timer-ring">
    <svg width="280" height="280">
      <circle class="ring-bg" cx="140" cy="140" r="130"></circle>
      <circle class="ring-progress ring-work" id="ring" cx="140" cy="140" r="130"
        stroke-dasharray="816.81" stroke-dashoffset="0"></circle>
    </svg>
    <div class="timer-text">
      <div class="time" id="time">25:00</div>
      <div class="label" id="label">Focus Time</div>
    </div>
  </div>

  <!-- Controls -->
  <div class="controls">
    <button class="btn" onclick="resetTimer()" title="Reset (R)" aria-label="Reset timer">â†º</button>
    <button class="btn btn-start work" id="start-btn" onclick="toggleTimer()" aria-label="Start or pause timer">START</button>
    <button class="btn" onclick="skipTimer()" title="Skip (N)" aria-label="Skip to next mode">â­</button>
  </div>


  <!-- Toggle options -->
  <div class="toggle-options">
    <label class="toggle-label">
      <input type="checkbox" id="auto-start-toggle" onchange="toggleAutoStart()">
      <span>Auto-start next timer</span>
    </label>
    <label class="toggle-label">
      <input type="checkbox" id="sound-toggle" checked onchange="toggleSound()">
      <span>ğŸ”” Sound</span>
    </label>
  </div>

  <!-- Session dots & stats -->
  <div class="sessions" id="sessions"></div>
  <div class="stats">
    <span id="stats">0 sessions completed today</span>
    <button class="settings-toggle" onclick="resetSessions()" style="font-size:10px;padding:2px 8px;margin-left:4px">Reset</button>
  </div>

  <!-- Metrics panel -->
  <button class="metrics-toggle" onclick="toggleMetrics()">ğŸ“Š Study Metrics</button>
  <div class="metrics-panel" id="metrics-panel">
    <div id="metrics-content"></div>
    <button class="metrics-clear" onclick="clearMetrics()">Clear History</button>
  </div>
</div>

<!-- Scripts loaded in dependency order -->
<script src="js/background.js"></script>  <!-- Animated particle background -->
<script src="js/timer.js"></script>     <!-- State & core logic (MODES, tick, controls) -->
<script src="js/ui.js"></script>        <!-- DOM update functions -->
<script src="js/tasks.js"></script>     <!-- Task list logic -->
<script src="js/settings.js"></script>  <!-- Settings panel logic -->
<script src="js/metrics.js"></script>   <!-- Study metrics -->
<script src="js/app.js"></script>       <!-- Initialization (runs last) -->
</body>
</html>
